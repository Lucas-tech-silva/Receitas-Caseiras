<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imprimir Receita - Sabor em Casa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print { 
            .no-print { display: none !important; } 
            body { margin: 0; padding: 0; }
        }
    </style>
</head>
<body class="bg-white text-gray-800 p-6">
    <!-- Cabe√ßalho -->
    <div class="text-center mb-8 border-b-2 border-orange-500 pb-6" >
        <img src="../assets/img/logo/logo.jpg" alt="Logo da Sabor em Casa: um garfo, uma faca e um chap√©u de cozinheiro" class="mx-auto h-16 mb-4">
        <h1 class="text-3xl font-bold text-orange-500 mb-2">Sabor em Casa</h1>
        <h2 id="recipe-title" class="text-2xl font-semibold text-gray-700 mb-4">Carregando...</h2>
        <img id="recipe-image" class="mx-auto rounded-lg shadow-md w-48 h-32 object-cover mb-4" style="display: none;">
        <div id="recipe-meta" class="flex justify-center gap-4 flex-wrap">
            <!-- Meta dados -->
        </div>
    </div>
    
    <!-- Bot√µes de a√ß√£o -->
    <div class="no-print text-center mb-8">
        <button onclick="window.print()" class="bg-orange-500 text-white px-6 py-3 rounded-lg mr-4 hover:bg-orange-600 transition">
            üñ®Ô∏è Imprimir
        </button>
        <button onclick="window.close()" class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition">
            ‚ùå Fechar
        </button>
    </div>
    
    <!-- Conte√∫do em duas colunas -->
    <div class="grid md:grid-cols-2 gap-8">
        <!-- Ingredientes -->
        <div class="bg-orange-50 p-6 rounded-lg">
            <h3 class="text-xl font-bold text-orange-600 mb-4 border-b-2 border-orange-500 pb-2">
                üìù Ingredientes
            </h3>
            <div id="ingredients-list" class="space-y-2">
                <!-- Ingredientes -->
            </div>
        </div>
        
        <!-- Modo de preparo -->
        <div class="bg-gray-50 p-6 rounded-lg">
            <h3 class="text-xl font-bold text-orange-600 mb-4 border-b-2 border-orange-500 pb-2">
                üë®‚Äçüç≥ Modo de Preparo
            </h3>
            <div id="instructions-list" class="space-y-3">
                <!-- Instru√ß√µes -->
            </div>
        </div>
    </div>
    
    <!-- Rodap√© -->
    <div class="mt-8 pt-4 border-t border-gray-200 text-center text-gray-500 text-sm">
        <p>Receita gerada em <span id="current-date"></span> | <strong>Sabor em Casa</strong></p>
    </div>

    <script>
        // Carrega dados da receita
        function loadRecipe() {
            const urlParams = new URLSearchParams(window.location.search);
            const recipeId = urlParams.get('id');
            
            if (!recipeId) {
                document.getElementById('recipe-title').textContent = 'Receita n√£o encontrada';
                return;
            }
            
            // Busca receita no localStorage
            const recipes = JSON.parse(localStorage.getItem('printRecipe') || '[]');
            const recipe = recipes.find(r => r.id === recipeId) || recipes[0];
            
            if (!recipe) {
                document.getElementById('recipe-title').textContent = 'Receita n√£o encontrada';
                return;
            }
            
            // Preenche dados
            document.title = recipe.nome + ' - Sabor em Casa';
            document.getElementById('recipe-title').textContent = recipe.nome;
            
            // Imagem
            const img = document.getElementById('recipe-image');
            img.src = '../' + recipe.imagem;
            img.alt = recipe.nome;
            img.style.display = 'block';
            
            // Meta dados
            document.getElementById('recipe-meta').innerHTML = `
                <span class="bg-gray-100 px-3 py-1 rounded-full text-sm">‚è±Ô∏è ${recipe.tempo} min</span>
                <span class="bg-gray-100 px-3 py-1 rounded-full text-sm">üìä ${recipe.dificuldade}</span>
                <span class="bg-gray-100 px-3 py-1 rounded-full text-sm">üçΩÔ∏è ${recipe.categoria}</span>
            `;
            
            // Ingredientes
            document.getElementById('ingredients-list').innerHTML = recipe.ingredientes.map(item => `
                <div class="bg-white p-2 rounded border-l-4 border-orange-400">
                    <span class="font-semibold text-orange-600">${item.quantidade}</span> 
                    <span class="text-gray-700">${item.item}</span>
                </div>
            `).join('');
            
            // Instru√ß√µes
            document.getElementById('instructions-list').innerHTML = recipe.instrucoes.map((step, index) => `
                <div class="flex items-start gap-3">
                    <div class="bg-orange-500 text-white w-6 h-6 rounded-full flex items-center justify-content font-bold text-xs flex-shrink-0 mt-1">
                        ${index + 1}
                    </div>
                    <p class="text-gray-700 text-sm leading-relaxed">${step}</p>
                </div>
            `).join('');
            
            // Data atual
            document.getElementById('current-date').textContent = new Date().toLocaleDateString('pt-BR');
        }
        
        // Carrega quando a p√°gina carrega
        document.addEventListener('DOMContentLoaded', loadRecipe);
    </script>
</body>
</html>